LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

ENTITY AddSub IS
	GENERIC (N	: INTEGER := 16);
	
	PORT(	A, B		: IN STD_LOGIC_VECTOR (N-1 DOWNTO 0);
			AorS		: IN STD_LOGIC;
			ANSWER	: OUT STD_LOGIC_VECTOR (N-1 DOWNTO 0);
			COUT		: OUT STD_LOGIC
	);
END AddSub;

ARCHITECTURE mixed OF AddSub IS

COMPONENT RCAN
	GENERIC(	N: INTEGER := 16);
	
	PORT(	a, b	: IN STD_LOGIC_VECTOR (N-1 DOWNTO 0);
			cin	: IN STD_LOGIC;
			s		: OUT STD_LOGIC_VECTOR (N-1 DOWNTO 0);
			cout	: OUT STD_LOGIC
	);
END COMPONENT;

addsub: RCAN
	GENERIC MAP(N => 16);
	PORT MAP(A,B,AorS,ANSWER,COUT);

BEGIN
	PROCESS(AorS)
	BEGIN
		IF AorS='1' THEN
			B <= NOT(B);
		END IF;
	END PROCESS;
END mixed;